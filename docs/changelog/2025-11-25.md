# 2025-11-25

## 変更点
- **PrinterManager**: 一時停止・再開ロジックの刷新
  - **一時停止 (`pause_job`)**:
    - `G60` (位置保存) がファームウェア未対応のため、`M114` コマンドと `serial.log` 解析による位置取得方式に変更
    - 停止ラグ（バッファ消化）を考慮し、`Paused` 状態遷移後に位置を取得するように変更
    - 退避動作: Z軸上昇 (+10mm) -> ベッド前方移動 (Y Max)
  - **再開 (`resume_job`)**:
    - 復帰順序の制御: XY軸復帰 -> Z軸復帰 の順序を保証（衝突回避）
    - 保存した座標情報に基づき `G1` コマンドで正確に復帰
- **Configuration**:
  - OctoPrintのシリアルログ (`serial.log`) を有効化（位置取得のため）
  - 不要な設定ディレクトリ `src/config/octoprint` を削除
- **Revert**: 以前の試行（`--basedir` オプションの使用、APIキーの変更）をロールバックし、デフォルトのOctoPrintインスタンスを使用するように戻しました。

## 目的
- ユーザー要望「一時停止時にベッドを前に出し、ノズルを上げる」の実装
- ユーザー要望「再開時はXY移動後にZ移動を行う」の実装（衝突回避）
- ファームウェア制約（G60/G61未対応）への対応
